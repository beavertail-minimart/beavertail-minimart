<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <!-- Disable zoom -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>Beavertail Mini-Mart Order</title>
 </head>

<body>
  <header>
    <div class="wrap brandbar">
      <div class="title">
        <span class="logoDot" aria-hidden="true"></span>
        <h1>BEAVERTAIL MINIMART</h1>
      </div>

      <div class="controls">
        <button class="iconbtn" id="openSearch" title="Search items" aria-label="Search items">üîé</button>

        <div class="toggle" id="themeToggle" title="Toggle light/dark mode" role="button" tabindex="0">
          <span id="themeLabel">‚òÄÔ∏è</span>
          <span class="dot"><span class="knob"></span></span>
        </div>
      </div>
    </div>
  </header>

  <main>
    <div class="wrap">
      <div class="grid" id="productGrid"></div>
    </div>
  </main>

  <div class="bottom">
    <div class="wrap">
      <div class="totals">
        <div class="grand">
          <span class="label">TOTAL</span>
          <strong id="totalText">UGX 0</strong>
        </div>
      </div>

      <div class="bottom-actions">
        <span class="badge" id="itemsBadge">0 items</span>
        <button class="btn btn-edit" id="editCartBtn" title="Edit your cart">üõí EDIT</button>
        <button class="btn btn-reset" id="resetCart">RESET</button>
        <button class="btn btn-next" id="nextBtn">NEXT ‚Üí</button>
      </div>
    </div>
  </div>

  <!-- Search modal -->
  <div class="modal" id="searchModal">
    <div class="sheet" role="dialog" aria-modal="true" aria-labelledby="searchTitle">
      <header>
        <div class="wrap" style="display:flex; align-items:center; justify-content:space-between; gap:12px;">
          <div>
            <h2 id="searchTitle">Search items</h2>
            <p>Type to filter the product list.</p>
          </div>
          <button class="btn" id="closeSearch" style="background:var(--surface); color:var(--text); border:1px solid var(--border); font-weight:1000;">Close</button>
        </div>
      </header>

      <div class="sheet-body">
        <div class="searchbox">
          <span style="opacity:.7">üîé</span>
          <input id="searchInputModal" type="text" placeholder="Search items‚Ä¶"/>
        </div>

        <div class="small">Results update on the main page as you type.</div>

        <div class="sheet-footer" style="justify-content:flex-end;">
          <button class="btn btn-next" id="doneSearch">Done</button>
        </div>
      </div>
    </div>
  </div>

  <!-- NEW: Cart editor modal -->
  <div class="modal" id="cartModal">
    <div class="sheet" role="dialog" aria-modal="true" aria-labelledby="cartTitle">
      <header>
        <div class="wrap" style="display:flex; align-items:center; justify-content:space-between; gap:12px;">
          <div>
            <h2 id="cartTitle">Edit your cart</h2>
            <p>Adjust quantities, tap OK, then proceed to NEXT.</p>
          </div>
          <button class="btn" id="closeCart" style="background:var(--surface); color:var(--text); border:1px solid var(--border); font-weight:1000;">Close</button>
        </div>
      </header>

      <div class="sheet-body">
        <div class="cartList" id="cartList"></div>

        <div class="cartSummary">
          <span class="label">Cart total</span>
          <span class="val" id="cartTotalText">UGX 0</span>
        </div>

        <div class="sheet-footer" style="justify-content:space-between;">
          <button class="btn btn-reset" id="clearCartInModal">Clear cart</button>
          <button class="btn btn-next" id="okCart">OK</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Checkout modal -->
  <div class="modal" id="checkoutModal">
    <div class="sheet" role="dialog" aria-modal="true" aria-labelledby="checkoutTitle">
      <header>
        <div class="wrap" style="display:flex; align-items:center; justify-content:space-between; gap:12px;">
          <div>
            <h2 id="checkoutTitle">Review your order</h2>
            <p>Choose delivery or pickup, then send.</p>
          </div>
          <button class="btn" id="closeCheckout" style="background:var(--surface); color:var(--text); border:1px solid var(--border); font-weight:1000;">Close</button>
        </div>
      </header>

      <div class="sheet-body">
        <!-- Delivery / Pickup -->
        <div class="fulfill">
          <div class="row2">
            <div class="radio" role="radiogroup" aria-label="Delivery or Pickup">
              <label>
                <input type="radio" name="fulfillment" id="pickupOpt" value="pickup" checked />
                Pickup
              </label>

              <label id="deliveryLabel">
                <input type="radio" name="fulfillment" id="deliveryOpt" value="delivery" />
                Delivery (on shopping &gt; 50k)
              </label>
            </div>
          </div>

          <div class="note" id="deliveryNote"></div>

          <div class="location" id="locationBox">
            <div style="font-weight:1000;">Delivery location</div>
            <textarea id="deliveryLocation" placeholder="Type your location (e.g., Bukoto near ... / House number / Landmark)"></textarea>
          </div>
        </div>

        <div class="orderbox" id="orderPreview"></div>

        <div class="sheet-footer">
          <div class="small">Tip: You can edit the message in WhatsApp/Email before sending.THANK YOU for shopping with us.</div>
          <div style="display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end;">
            <a class="btn" id="waBtn" href="#" target="_blank" rel="noopener" style="background:rgba(5,150,105,.16); border:1px solid rgba(5,150,105,.35); color:color-mix(in srgb, var(--ok) 92%, var(--text)); font-weight:1000;">Send via WhatsApp</a>
            <a class="btn" id="emailBtn" href="#" style="background:var(--surface); color:var(--text); border:1px solid var(--border); font-weight:1000;">Send via Email</a>
          </div>
        </div>
      </div>
    </div>
  </div>
  
</body>
</html>
